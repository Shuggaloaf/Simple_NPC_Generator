{"name":"NPC Generator","type":"script","author":"64zaZN9RLZth3PNt","img":"Images/Icons/Custom/people-2-icon.png","scope":"global","command":"async function rollCharacter(tableFName, tableLName, race, gender) {\n    let TblFName = await game.tables.getName(tableFName).roll();\n    let TblLName = await game.tables.getName(tableLName).roll();\n    let TblHeight = await game.tables.getName('TableHeight').roll();   \n    let TblWeight = await game.tables.getName('TableWeight').roll();   \n    let TblComplexion = await game.tables.getName('TableComplexion').roll();   \n    let TblHairType = await game.tables.getName('TableHairType').roll();   \n    let TblHairColor = await game.tables.getName('TableHairColor').roll();   \n    let TblFaceHair = await game.tables.getName('TableFaceHair').roll();   \n    let TblEyeShape = await game.tables.getName('TableEyeShape').roll();   \n    let TblEyes = await game.tables.getName('TableEyes').roll();   \n    let TblDemeanor = await game.tables.getName('TableDemeanor').roll();   \n    let TblDescriptors = await game.tables.getName('TableDescriptors').roll();   \n    let TblProfession = await game.tables.getName('TableProfession').roll();\n    ChatMessage.create({\n        content: `<h2><b>${TblFName.results[0].data.text} ${TblLName.results[0].data.text}</b></h2>\n              <b>${race}, ${gender}</b><br>\n              <i>${TblProfession.results[0].data.text}</i><br><br>\n              • ${TblHeight.results[0].data.text} and ${TblWeight.results[0].data.text} build<br>\n              • ${TblComplexion.results[0].data.text} complexion<br>\n              • ${TblEyeShape.results[0].data.text} ${TblEyes.results[0].data.text}<br>\n              • ${TblHairType.results[0].data.text}, ${TblHairColor.results[0].data.text} Hair,<br>\n              • ${TblFaceHair.results[0].data.text}<br>\n              • ${TblDemeanor.results[0].data.text} demeanor<br><br>• ${TblDescriptors.results[0].data.text}<br>`,\n        whisper: ChatMessage.getWhisperRecipients(\"GM\")         \n    });\n}\n\nlet stayOpen = false;\n\nlet dialogContent = `\n                  <style>\n                      #NPCGen-dialog .dialog-buttons {\n                          flex-direction: column;\n                      }\n                  </style>\n                  `;\n\n\nlet d = new Dialog({\n  content : dialogContent, title : `NPC GENERATOR`,\n  buttons : {\n    one : {\n      label :   `<b style = \"font-size:20px\">Human</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true; //add this for async Callbacks\n        rollCharacter(\"TableHumanMaleNames\", \"TableHumanLastNames\",\"Human\",\"Male\");\n      },\n    },\n    three : {\n      label :   `<b style = \"font-size:20px\">Dwarf</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableDwarfMaleNames\", \"TableDwarfLastNames\",\"Dwarf\",\"Male\");\n      },\n    }, \n    five : {\n      label :   `<b style = \"font-size:20px\">Elf</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableElfMaleNames\", \"TableElfLastNames\",\"Elf\",\"Male\");\n      },\n    }, \n    seven: {\n      label :   `<b style = \"font-size:20px\">Halfling</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableHalflingMaleNames\", \"TableHalflingLastNames\",\"Halfling\",\"Male\");\n      },\n    }, \n    nine: {\n      label :   `<b style = \"font-size:20px\">Half&nbsp;Elf</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableHalfElfMaleNames\", \"TableHalfElfLastNames\",\"Half Elf\",\"Male\");\n      },\n    },\n    fourteen : {\n      label :   `<b style = \"font-size:20px\">Gnome</b><br>`+\n                `<b style=\"border-style:solid;border-color:black;background-color:darkblue;color:white\">Male</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"GnoMale\", \"GnoMale\",\"Gnome\",\"Male\");\n      },    \n    }, \n    two : {\n      label :   `<b style = \"font-size:20px\">Human</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableHumanFemaleNames\", \"TableHumanLastNames\",\"Human\",\"Female\");\n      },\n    }, \n    \n    four : {\n      label :   `<b style = \"font-size:20px\">Dwarf</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableDwarfFemaleNames\", \"TableDwarfLastNames\",\"Dwarf\",\"Female\");    \n      },\n    }, \n    \n    six : {\n      label :   `<b style = \"font-size:20px\">Elf</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableElfFemaleNames\", \"TableElfLastNames\",\"Elf\",\"Female\");\n      },\n    }, \n\n    eight : {\n      label :   `<b style = \"font-size:20px\">Halfling</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableHalflingFemaleNames\", \"TableHalflingLastNames\",\"Halfling\",\"Female\");\n      },\n    }, \n    \n    ten : {\n      label :   `<b style = \"font-size:20px\">Half&nbsp;Elf</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"TableHalfElfFemaleNames\", \"TableHalfElfLastNames\",\"Half Elf\",\"Female\");\n      },    \n    }, \n   \n    fifteen : {\n      label :   `<b style = \"font-size:20px\">Gnome</b><br>`+\n                `<b style=\"border-style:solid;border-color:purple;background-color:pink;color:black\">Female</b>`,\n      callback : async() => {\n        stayOpen = true;\n        rollCharacter(\"GnoFem\", \"GnoMale\",\"Gnome\",\"Female\");\n      },    \n    }, \n    \n    eleven : {\n      label : `<b style=\"color:darkred; font-size:18px\">Professions</b>`,\n      callback : async() => {\n        stayOpen = true;          \n        let TblProfession0 = await game.tables.getName('TableProfession').roll();            \n        let TblProfession1 = await game.tables.getName('TableProfession').roll();            \n        let TblProfession2 = await game.tables.getName('TableProfession').roll();            \n        let TblProfession3 = await game.tables.getName('TableProfession').roll();            \n        let TblProfession4 = await game.tables.getName('TableProfession').roll();            \n            ChatMessage.create({\n            content: `<h2><b>Professions</b></h2>`+\n                     `• ${TblProfession0.results[0].data.text}<br>`+\n                     `• ${TblProfession1.results[0].data.text}<br>`+\n                     `• ${TblProfession2.results[0].data.text}<br>`+\n                     `• ${TblProfession3.results[0].data.text}<br>`+\n                     `• ${TblProfession4.results[0].data.text}<br>`,\n                     whisper: ChatMessage.getWhisperRecipients(\"GM\") \n        });\n      },\n    }, \n    \n    twelve : {\n      label : `<b style=\"color:darkred; font-size:18px\">Quirks</b>`,\n      callback : async() => {\n        stayOpen = true;          \n        let TblQuirk1 = await game.tables.getName('TableDescriptors').roll();            \n        let TblQuirk2 = await game.tables.getName('TableDescriptors').roll();            \n        let TblQuirk3 = await game.tables.getName('TableDescriptors').roll();            \n        let TblQuirk4 = await game.tables.getName('TableDescriptors').roll();            \n        let TblQuirk5 = await game.tables.getName('TableDescriptors').roll();            \n            ChatMessage.create({\n            content: `<h2><b>Quirks</b></h2>`+\n                     `• ${TblQuirk1.results[0].data.text}<br>`+\n                     `• ${TblQuirk2.results[0].data.text}<br>`+\n                     `• ${TblQuirk3.results[0].data.text}<br>`+\n                     `• ${TblQuirk4.results[0].data.text}<br>`+\n                     `• ${TblQuirk5.results[0].data.text}<br>`,\n                     whisper: ChatMessage.getWhisperRecipients(\"GM\") \n        });\n      },\n    },\n    \n    thirteen : {\n      label : `<b style=\"color:darkred; font-size:18px\">Backstory</b>`,\n      callback : async() => {\n        stayOpen = true;\n        game.journal.getName(\"NPC Backstory Generator\").sheet.render(true)\n        d.render(true); \n      },\n    }\n  },\n  \n  close: () => {\n      if(stayOpen) {\n        stayOpen = false;\n        d.render(true);\n      }\n    }\n},{width:520,left:1885,top:1125}).render(true);","folder":null,"sort":0,"permission":{"default":0,"64zaZN9RLZth3PNt":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":true},"core":{"sourceId":"Macro.dtP481jZ2jCub9DW"},"scene-packer":{"sourceId":"Macro.dtP481jZ2jCub9DW","hash":"3a89d8bdd627695e704d521f849ab80a2c417602"}},"_id":"Q1JqpDxKZpd1EkPL"}
